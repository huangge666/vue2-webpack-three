"use strict";(self.webpackChunkmy_webpack_vue=self.webpackChunkmy_webpack_vue||[]).push([[842],{4842:(t,e,n)=>{n.r(e),n.d(e,{default:()=>P});var s=function(){var t=this,e=t._self._c;return e("div",[e("ThreeView",{staticClass:"three-box",attrs:{sceneUrl:t.sceneUrl,modelUrl:t.modelUrl}})],1)};s._withStripped=!0;var o=function(){return(0,this._self._c)("div",{staticClass:"threejs-container"})};o._withStripped=!0;var i=n(4942);function r(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var a=n(9477),l=n(9365),c=n(1217);const h=/^[og]\s*(.+)?/,u=/^mtllib /,d=/^usemtl /,p=/^usemap /,m=new a.Pa4,f=new a.Pa4,g=new a.Pa4,b=new a.Pa4,y=new a.Pa4,w=new a.Ilk;function v(){const t={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(t,e){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=!1!==e);const n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:!1!==e,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(t,e){const n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);const s={index:this.materials.length,name:t||"",mtllib:Array.isArray(e)&&e.length>0?e[e.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(t){const e={index:"number"==typeof t?t:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return e.clone=this.clone.bind(e),e}};return this.materials.push(s),s},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(t){const e=this.currentMaterial();if(e&&-1===e.groupEnd&&(e.groupEnd=this.geometry.vertices.length/3,e.groupCount=e.groupEnd-e.groupStart,e.inherited=!1),t&&this.materials.length>1)for(let t=this.materials.length-1;t>=0;t--)this.materials[t].groupCount<=0&&this.materials.splice(t,1);return t&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),e}},n&&n.name&&"function"==typeof n.clone){const t=n.clone(0);t.inherited=!0,this.object.materials.push(t)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(t,e){const n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)},parseNormalIndex:function(t,e){const n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)},parseUVIndex:function(t,e){const n=parseInt(t,10);return 2*(n>=0?n-1:n+e/2)},addVertex:function(t,e,n){const s=this.vertices,o=this.object.geometry.vertices;o.push(s[t+0],s[t+1],s[t+2]),o.push(s[e+0],s[e+1],s[e+2]),o.push(s[n+0],s[n+1],s[n+2])},addVertexPoint:function(t){const e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addVertexLine:function(t){const e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addNormal:function(t,e,n){const s=this.normals,o=this.object.geometry.normals;o.push(s[t+0],s[t+1],s[t+2]),o.push(s[e+0],s[e+1],s[e+2]),o.push(s[n+0],s[n+1],s[n+2])},addFaceNormal:function(t,e,n){const s=this.vertices,o=this.object.geometry.normals;m.fromArray(s,t),f.fromArray(s,e),g.fromArray(s,n),y.subVectors(g,f),b.subVectors(m,f),y.cross(b),y.normalize(),o.push(y.x,y.y,y.z),o.push(y.x,y.y,y.z),o.push(y.x,y.y,y.z)},addColor:function(t,e,n){const s=this.colors,o=this.object.geometry.colors;void 0!==s[t]&&o.push(s[t+0],s[t+1],s[t+2]),void 0!==s[e]&&o.push(s[e+0],s[e+1],s[e+2]),void 0!==s[n]&&o.push(s[n+0],s[n+1],s[n+2])},addUV:function(t,e,n){const s=this.uvs,o=this.object.geometry.uvs;o.push(s[t+0],s[t+1]),o.push(s[e+0],s[e+1]),o.push(s[n+0],s[n+1])},addDefaultUV:function(){const t=this.object.geometry.uvs;t.push(0,0),t.push(0,0),t.push(0,0)},addUVLine:function(t){const e=this.uvs;this.object.geometry.uvs.push(e[t+0],e[t+1])},addFace:function(t,e,n,s,o,i,r,a,l){const c=this.vertices.length;let h=this.parseVertexIndex(t,c),u=this.parseVertexIndex(e,c),d=this.parseVertexIndex(n,c);if(this.addVertex(h,u,d),this.addColor(h,u,d),void 0!==r&&""!==r){const t=this.normals.length;h=this.parseNormalIndex(r,t),u=this.parseNormalIndex(a,t),d=this.parseNormalIndex(l,t),this.addNormal(h,u,d)}else this.addFaceNormal(h,u,d);if(void 0!==s&&""!==s){const t=this.uvs.length;h=this.parseUVIndex(s,t),u=this.parseUVIndex(o,t),d=this.parseUVIndex(i,t),this.addUV(h,u,d),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(t){this.object.geometry.type="Points";const e=this.vertices.length;for(let n=0,s=t.length;n<s;n++){const s=this.parseVertexIndex(t[n],e);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(t,e){this.object.geometry.type="Line";const n=this.vertices.length,s=this.uvs.length;for(let e=0,s=t.length;e<s;e++)this.addVertexLine(this.parseVertexIndex(t[e],n));for(let t=0,n=e.length;t<n;t++)this.addUVLine(this.parseUVIndex(e[t],s))}};return t.startObject("",!1),t}class j extends a.aNw{constructor(t){super(t),this.materials=null}load(t,e,n,s){const o=this,i=new a.hH6(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(t,(function(n){try{e(o.parse(n))}catch(e){s&&s(e),o.manager.itemError(t)}}),n,s)}setMaterials(t){return this.materials=t,this}parse(t){const e=new v;-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));const n=t.split("\n");let s="",o="",i=0,r=[];const l="function"==typeof"".trimLeft;for(let t=0,a=n.length;t<a;t++)if(s=n[t],s=l?s.trimLeft():s.trim(),i=s.length,0!==i&&(o=s.charAt(0),"#"!==o))if("v"===o){const t=s.split(/\s+/);switch(t[0]){case"v":e.vertices.push(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])),t.length>=7?(w.setRGB(parseFloat(t[4]),parseFloat(t[5]),parseFloat(t[6])).convertSRGBToLinear(),e.colors.push(w.r,w.g,w.b)):e.colors.push(void 0,void 0,void 0);break;case"vn":e.normals.push(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]));break;case"vt":e.uvs.push(parseFloat(t[1]),parseFloat(t[2]))}}else if("f"===o){const t=s.slice(1).trim().split(/\s+/),n=[];for(let e=0,s=t.length;e<s;e++){const s=t[e];if(s.length>0){const t=s.split("/");n.push(t)}}const o=n[0];for(let t=1,s=n.length-1;t<s;t++){const s=n[t],i=n[t+1];e.addFace(o[0],s[0],i[0],o[1],s[1],i[1],o[2],s[2],i[2])}}else if("l"===o){const t=s.substring(1).trim().split(" ");let n=[];const o=[];if(-1===s.indexOf("/"))n=t;else for(let e=0,s=t.length;e<s;e++){const s=t[e].split("/");""!==s[0]&&n.push(s[0]),""!==s[1]&&o.push(s[1])}e.addLineGeometry(n,o)}else if("p"===o){const t=s.slice(1).trim().split(" ");e.addPointGeometry(t)}else if(null!==(r=h.exec(s))){const t=(" "+r[0].slice(1).trim()).slice(1);e.startObject(t)}else if(d.test(s))e.object.startMaterial(s.substring(7).trim(),e.materialLibraries);else if(u.test(s))e.materialLibraries.push(s.substring(7).trim());else if(p.test(s));else if("s"===o){if(r=s.split(" "),r.length>1){const t=r[1].trim().toLowerCase();e.object.smooth="0"!==t&&"off"!==t}else e.object.smooth=!0;const t=e.object.currentMaterial();t&&(t.smooth=e.object.smooth)}else if("\0"===s)continue;e.finalize();const c=new a.ZAu;c.materialLibraries=[].concat(e.materialLibraries);if(!0===!(1===e.objects.length&&0===e.objects[0].geometry.vertices.length))for(let t=0,n=e.objects.length;t<n;t++){const n=e.objects[t],s=n.geometry,o=n.materials,i="Line"===s.type,r="Points"===s.type;let l=!1;if(0===s.vertices.length)continue;const h=new a.u9r;h.setAttribute("position",new a.a$l(s.vertices,3)),s.normals.length>0&&h.setAttribute("normal",new a.a$l(s.normals,3)),s.colors.length>0&&(l=!0,h.setAttribute("color",new a.a$l(s.colors,3))),!0===s.hasUVIndices&&h.setAttribute("uv",new a.a$l(s.uvs,2));const u=[];for(let t=0,n=o.length;t<n;t++){const n=o[t],s=n.name+"_"+n.smooth+"_"+l;let c=e.materials[s];if(null!==this.materials)if(c=this.materials.create(n.name),!i||!c||c instanceof a.nls){if(r&&c&&!(c instanceof a.UY4)){const t=new a.UY4({size:10,sizeAttenuation:!1});a.F5T.prototype.copy.call(t,c),t.color.copy(c.color),t.map=c.map,c=t}}else{const t=new a.nls;a.F5T.prototype.copy.call(t,c),t.color.copy(c.color),c=t}void 0===c&&(c=i?new a.nls:r?new a.UY4({size:1,sizeAttenuation:!1}):new a.xoR,c.name=n.name,c.flatShading=!n.smooth,c.vertexColors=l,e.materials[s]=c),u.push(c)}let d;if(u.length>1){for(let t=0,e=o.length;t<e;t++){const e=o[t];h.addGroup(e.groupStart,e.groupCount,t)}d=i?new a.ejS(h,u):r?new a.woe(h,u):new a.Kj0(h,u)}else d=i?new a.ejS(h,u[0]):r?new a.woe(h,u[0]):new a.Kj0(h,u[0]);d.name=n.name,c.add(d)}else if(e.vertices.length>0){const t=new a.UY4({size:1,sizeAttenuation:!1}),n=new a.u9r;n.setAttribute("position",new a.a$l(e.vertices,3)),e.colors.length>0&&void 0!==e.colors[0]&&(n.setAttribute("color",new a.a$l(e.colors,3)),t.vertexColors=!0);const s=new a.woe(n,t);c.add(s)}return c}}var x=n(2086);class U extends a.yxD{constructor(t){super(t),this.type=a.cLu}parse(t){const e=function(t,e,n){e=e||1024;let s=t.pos,o=-1,i=0,r="",a=String.fromCharCode.apply(null,new Uint16Array(t.subarray(s,s+128)));for(;0>(o=a.indexOf("\n"))&&i<e&&s<t.byteLength;)r+=a,i+=a.length,s+=128,a+=String.fromCharCode.apply(null,new Uint16Array(t.subarray(s,s+128)));return-1<o&&(!1!==n&&(t.pos+=i+o+1),r+a.slice(0,o))},n=function(t,e,n,s){const o=t[e+3],i=Math.pow(2,o-128)/255;n[s+0]=t[e+0]*i,n[s+1]=t[e+1]*i,n[s+2]=t[e+2]*i,n[s+3]=1},s=function(t,e,n,s){const o=t[e+3],i=Math.pow(2,o-128)/255;n[s+0]=a.A5E.toHalfFloat(Math.min(t[e+0]*i,65504)),n[s+1]=a.A5E.toHalfFloat(Math.min(t[e+1]*i,65504)),n[s+2]=a.A5E.toHalfFloat(Math.min(t[e+2]*i,65504)),n[s+3]=a.A5E.toHalfFloat(1)},o=new Uint8Array(t);o.pos=0;const i=function(t){const n=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*FORMAT=(\S+)\s*$/,i=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,r={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let a,l;if(t.pos>=t.byteLength||!(a=e(t)))return-1;if(!(l=a.match(/^#\?(\S+)/)))return-1;for(r.valid|=1,r.programtype=l[1],r.string+=a+"\n";a=e(t),!1!==a;)if(r.string+=a+"\n","#"!==a.charAt(0)){if((l=a.match(n))&&(r.gamma=parseFloat(l[1])),(l=a.match(s))&&(r.exposure=parseFloat(l[1])),(l=a.match(o))&&(r.valid|=2,r.format=l[1]),(l=a.match(i))&&(r.valid|=4,r.height=parseInt(l[1],10),r.width=parseInt(l[2],10)),2&r.valid&&4&r.valid)break}else r.comments+=a+"\n";return 2&r.valid&&4&r.valid?r:-1}(o);if(-1!==i){const t=i.width,e=i.height,r=function(t,e,n){const s=e;if(s<8||s>32767||2!==t[0]||2!==t[1]||128&t[2])return new Uint8Array(t);if(s!==(t[2]<<8|t[3]))return-1;const o=new Uint8Array(4*e*n);if(!o.length)return-1;let i=0,r=0;const a=4*s,l=new Uint8Array(4),c=new Uint8Array(a);let h=n;for(;h>0&&r<t.byteLength;){if(r+4>t.byteLength)return-1;if(l[0]=t[r++],l[1]=t[r++],l[2]=t[r++],l[3]=t[r++],2!=l[0]||2!=l[1]||(l[2]<<8|l[3])!=s)return-1;let e,n=0;for(;n<a&&r<t.byteLength;){e=t[r++];const s=e>128;if(s&&(e-=128),0===e||n+e>a)return-1;if(s){const s=t[r++];for(let t=0;t<e;t++)c[n++]=s}else c.set(t.subarray(r,r+e),n),n+=e,r+=e}const u=s;for(let t=0;t<u;t++){let e=0;o[i]=c[t+e],e+=s,o[i+1]=c[t+e],e+=s,o[i+2]=c[t+e],e+=s,o[i+3]=c[t+e],i+=4}h--}return o}(o.subarray(o.pos),t,e);if(-1!==r){let o,l,c,h;switch(this.type){case a.VzW:h=r.length/4;const t=new Float32Array(4*h);for(let e=0;e<h;e++)n(r,4*e,t,4*e);o=t,c=a.VzW;break;case a.cLu:h=r.length/4;const e=new Uint16Array(4*h);for(let t=0;t<h;t++)s(r,4*t,e,4*t);o=e,c=a.cLu}return{width:t,height:e,data:o,header:i.string,gamma:i.gamma,exposure:i.exposure,format:l,type:c}}}return null}setDataType(t){return this.type=t,this}load(t,e,n,s){return super.load(t,(function(t,n){switch(t.type){case a.VzW:case a.cLu:t.encoding=a.rnI,t.minFilter=a.wem,t.magFilter=a.wem,t.generateMipmaps=!1,t.flipY=!0}e&&e(t,n)}),n,s)}}function F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}var V=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dom=e,this.opt=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?F(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({sceneUrl:"",modelUrl:"",autoRotate:!1,isFullBrowser:!0},n),this.scene=null,this.camera=null,this.renderer=null,this.controls=null,this.model=null,this.init()}var e,n,s;return e=t,(n=[{key:"init",value:function(){this.sceneInit(),this.cameraInit(),this.renderInit(),this.controlsInit(),this.animate(),this.opt.sceneUrl&&this.loadScene(this.opt.sceneUrl),this.opt.modelUrl&&this.loadModel(this.opt.modelUrl),this.opt.isFullBrowser&&window.addEventListener("resize",this.onWindowResize.bind(this))}},{key:"sceneInit",value:function(){this.scene=new a.xsS;var t=new a.Mig(16777215);this.scene.add(t)}},{key:"cameraInit",value:function(){this.camera=new a.cPb(70,this.getWidth()/this.getHeight(),.01,2e3),this.camera.position.set(0,0,1.8)}},{key:"renderInit",value:function(){this.renderer=new a.CP7({antialias:!0,alpha:!0}),this.renderer.setSize(this.getWidth(),this.getHeight()),this.renderer.setPixelRatio(window.devicePixelRatio),this.dom.appendChild(this.renderer.domElement)}},{key:"controlsInit",value:function(){this.controls=new l.z(this.camera,this.renderer.domElement),this.controls.autoRotateSpeed=1,this.controls.autoRotate=this.autoRotate,this.controls.enableDamping=!0,this.controls.dampingFactor=.2,this.controls.rotateSpeed=.3,this.controlsRotate(this.opt.autoRotate),this.controls.update()}},{key:"controlsRotate",value:function(t){var e=this;if(this.controls.autoRotate=t||!1,t){var n=null;this.controls.addEventListener("start",(function(){n&&clearTimeout(n),e.controls.autoRotate=!1})),this.controls.addEventListener("end",(function(){n=setTimeout((function(){e.controls.autoRotate=!0,e.controls.update()}),3e3)}))}}},{key:"animate",value:function(){var t=this;requestAnimationFrame((function(){t.animate()})),this.controls.update(),this.renderer.render(this.scene,this.camera)}},{key:"loadScene",value:function(t){var e=this;/\.hdr$/i.test(t)?(new U).load(t,(function(t){t.mapping=a.dSO,e.scene.background=t,e.scene.environment=t})):/\.(jpg|jpeg|png|gif|bmp)$/i.test(t)&&(new a.dpR).load(t,(function(t){t.mapping=a.dSO,t.wrapS=a.rpg,t.wrapT=a.rpg,e.scene.background=t,e.scene.environment=t}))}},{key:"loadModel",value:function(t){var e=this;/\.gltf$/i.test(t)?(new c.E).load(t,(function(t){e.model&&e.scene.remove(e.model);var n=t.scene;e.adjustModel(n),e.model=n,e.scene.add(e.model)}),(function(t){}),(function(t){})):/\.obj$/i.test(t)?(new j).load(t,(function(t){e.model&&e.scene.remove(e.model),e.adjustModel(t),e.model=t,e.scene.add(e.model)}),(function(t){}),(function(t){})):/\.fbx$/i.test(t)&&(new x.y).load(t,(function(t){e.model&&e.scene.remove(e.model),e.adjustModel(t),e.model=t,e.scene.add(e.model)}),(function(t){}),(function(t){}))}},{key:"adjustModel",value:function(t){var e=(new a.ZzF).setFromObject(t),n=new a.Pa4;e.getSize(n),t.position.y=-n.y/4;var s=(n.x+n.y+n.z)/3;this.camera.position.set(0,0,s),this.camera.updateProjectionMatrix()}},{key:"onWindowResize",value:function(){this.camera.aspect=this.getWidth()/this.getHeight(),this.camera.updateProjectionMatrix(),this.renderer.setSize(this.getWidth(),this.getHeight())}},{key:"getWidth",value:function(){return this.opt.isFullBrowser?window.innerWidth:this.dom.offsetWidth}},{key:"getHeight",value:function(){return this.opt.isFullBrowser?window.innerHeight:this.dom.offsetHeight}}])&&r(e.prototype,n),s&&r(e,s),Object.defineProperty(e,"prototype",{writable:!1}),t}();const A={props:{sceneUrl:{type:String,required:!0},modelUrl:{type:String},autoRotate:{type:Boolean,default:!1},isFullBrowser:{type:Boolean,default:!0}},data:function(){return{threeView:null}},watch:{sceneUrl:function(t){this.threeView.loadScene(t)},modelUrl:function(t){this.threeView.loadModel(t)},autoRotate:function(t){this.threeView.controlsRotate(t)}},mounted:function(){this.threeView=new V(this.$el,{sceneUrl:this.sceneUrl,modelUrl:this.modelUrl,autoRotate:this.autoRotate,isFullBrowser:this.isFullBrowser})}};var I=n(1900);const O={name:"",components:{ThreeView:(0,I.Z)(A,o,[],!1,null,null,null).exports},data:function(){return{sceneUrl:"static/bg.jpg",modelUrl:"static/fbx/02.fbx"}},methods:{}};const P=(0,I.Z)(O,s,[],!1,null,"46333b60",null).exports},4942:(t,e,n)=>{function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{Z:()=>s})}}]);
//# sourceMappingURL=chunk-e3cd787116249d5c4fb2.js.map